# Types New Features Architecture

## Change Log

| Date       | Version | Description                                                    | Author              |
| ---------- | ------- | -------------------------------------------------------------- | ------------------- |
| 2025-10-30 | 1.0     | New types: Equipment Cost Analysis & Partnership Profit Sharing | Winston (Architect) |

## Overview

This document outlines the shared TypeScript types for two major new features:

1. **Equipment Cost Analysis System** - Types for equipment cost tracking and ROI calculations
2. **Partnership Profit Sharing System** - Types for partnership management and profit distribution

## Enhanced Equipment Types

### Changes to Existing Equipment Interface

**File:** `types/src/models/Equipment.ts`

**Changes:**
```typescript
// MODIFY existing Equipment interface - ADD these fields:
export interface Equipment {
  // ... existing fields (unchanged)
  
  // NEW COST TRACKING FIELDS ⭐
  purchaseCost: number | null;        // Initial purchase cost
  monthlyDepreciation: number | null; // Monthly depreciation amount
  maintenanceCost: number;            // Total maintenance expenses (default: 0)
  lastMaintenanceDate: Date | null;   // Last maintenance performed
}

// UPDATE existing input interfaces
export interface CreateEquipmentInput {
  // ... existing fields (unchanged)
  
  // NEW OPTIONAL COST FIELDS ⭐
  purchaseCost?: number;
  monthlyDepreciation?: number;
  maintenanceCost?: number;
}

export interface UpdateEquipmentInput {
  // ... existing fields (unchanged)
  
  // NEW OPTIONAL COST FIELDS ⭐
  purchaseCost?: number;
  monthlyDepreciation?: number;
  maintenanceCost?: number;
  lastMaintenanceDate?: Date;
}
```

### New Equipment Cost Types ⭐

**File:** `types/src/models/EquipmentCost.ts` - NEW FILE

```typescript
/**
 * Equipment Cost Analysis Types
 * 
 * Types for tracking equipment expenses, depreciation, and ROI calculations
 */

// Equipment cost update input
export interface EquipmentCostInput {
  purchaseCost?: number;
  monthlyDepreciation?: number;
  maintenanceCost?: number;
}

// Equipment financial summary
export interface EquipmentFinancials {
  totalEquipmentCost: number;      // Sum of all equipment purchase costs
  monthlyDepreciation: number;     // Total monthly depreciation
  maintenanceCosts: number;        // Total maintenance expenses
  equipmentROI: number;            // Average ROI across all equipment
  costPerCustomer: number;         // Equipment cost per active customer
  equipmentCount: number;          // Total number of equipment items
}

// Individual equipment ROI calculation
export interface EquipmentROI {
  equipmentId: string;
  equipmentName: string;
  totalCost: number;               // Purchase cost + maintenance
  totalRevenue: number;            // Revenue generated by this equipment
  netProfit: number;               // Revenue - costs
  roiPercentage: number;           // (profit / cost) * 100
  paybackMonths: number;           // Months to recover investment
  monthsInService: number;         // How long equipment has been in use
  isAssigned: boolean;             // Whether equipment is currently assigned
  assignedCustomerCount: number;   // Number of customers using this equipment
}

// Equipment cost analysis for date range
export interface EquipmentCostAnalysis {
  dateRange: {
    startDate: Date;
    endDate: Date;
  };
  totalCosts: {
    purchase: number;
    maintenance: number;
    depreciation: number;
    total: number;
  };
  revenueGenerated: number;
  netProfit: number;
  averageROI: number;
  equipmentBreakdown: EquipmentROI[];
  monthlyTrend: MonthlyEquipmentCost[];
}

// Monthly equipment cost breakdown
export interface MonthlyEquipmentCost {
  month: string;                   // YYYY-MM format
  depreciation: number;
  maintenance: number;
  newPurchases: number;
  totalCost: number;
  revenue: number;
  profit: number;
}

// Maintenance record
export interface MaintenanceRecord {
  id: string;
  equipmentId: string;
  maintenanceDate: Date;
  cost: number;
  description: string;
  performedBy: string;             // User ID who performed maintenance
  createdAt: Date;
  updatedAt: Date;
}

// Maintenance record input
export interface CreateMaintenanceRecordInput {
  equipmentId: string;
  maintenanceDate: Date;
  cost: number;
  description: string;
}

// Equipment cost filters
export interface EquipmentCostFilters {
  showOnlyWithCosts?: boolean;
  minROI?: number;
  maxROI?: number;
  hasMaintenanceRecords?: boolean;
  dateRange?: {
    startDate: Date;
    endDate: Date;
  };
}
```

## New Partnership Types ⭐

### Partnership Management Types

**File:** `types/src/models/Partnership.ts` - NEW FILE

```typescript
/**
 * Partnership Management Types
 * 
 * Types for managing multi-partner ownership and profit sharing
 */

// Partner role enumeration
export enum PartnerRole {
  OWNER = 'OWNER',           // Company owner with full control
  PARTNER = 'PARTNER',       // Active business partner
  INVESTOR = 'INVESTOR'      // Silent investor
}

// Partnership interface
export interface Partnership {
  id: string;
  companyId: string;              // Provider company ID
  partnerId: string;              // Partner user ID
  ownershipPercentage: number;    // 0-100 percentage
  joinDate: Date;
  isActive: boolean;
  role: PartnerRole;
  investmentAmount: number | null; // Initial investment (optional)
  createdAt: Date;
  updatedAt: Date;
  
  // Populated relations
  company?: UserPublic;           // Company/provider details
  partner?: UserPublic;           // Partner user details
}

// Partnership creation input
export interface CreatePartnershipInput {
  companyId: string;
  partnerEmail: string;           // Email to find partner user
  ownershipPercentage: number;
  role?: PartnerRole;
  investmentAmount?: number;
}

// Partnership update input
export interface UpdatePartnershipInput {
  ownershipPercentage?: number;
  role?: PartnerRole;
  isActive?: boolean;
  investmentAmount?: number;
}

// Partnership validation result
export interface PartnershipValidation {
  isValid: boolean;
  totalOwnership: number;
  message?: string;
  missingPercentage?: number;
  excessPercentage?: number;
}

// Partnership summary for company
export interface PartnershipSummary {
  companyId: string;
  totalPartners: number;
  activePartners: number;
  totalOwnership: number;
  isOwnershipComplete: boolean;   // Whether ownership adds up to 100%
  partners: Partnership[];
}
```

### Profit Distribution Types

**File:** `types/src/models/ProfitDistribution.ts` - NEW FILE

```typescript
/**
 * Profit Distribution Types
 * 
 * Types for calculating and distributing profits to partners
 */

// Distribution status enumeration
export enum DistributionStatus {
  CALCULATED = 'CALCULATED',     // Profit calculated but not distributed
  DISTRIBUTED = 'DISTRIBUTED',   // Distributed to partners but not paid
  PAID = 'PAID'                  // All partners have been paid
}

// Profit distribution interface
export interface ProfitDistribution {
  id: string;
  companyId: string;
  month: string;                  // YYYY-MM format
  totalRevenue: number;
  totalExpenses: number;
  equipmentCosts: number;         // Equipment-specific costs
  operationalCosts: number;       // Other operational expenses
  netProfit: number;              // Revenue - all expenses
  distributionDate: Date;
  status: DistributionStatus;
  createdAt: Date;
  updatedAt: Date;
  
  // Populated relations
  company?: UserPublic;           // Company details
  partnerShares?: PartnerShare[]; // Individual partner shares
}

// Profit calculation input
export interface CalculateProfitInput {
  companyId: string;
  month: string;                  // YYYY-MM format
}

// Profit calculation result
export interface ProfitCalculationResult {
  month: string;
  revenue: {
    totalRevenue: number;
    billingRevenue: number;
    otherRevenue: number;
  };
  expenses: {
    equipmentCosts: number;
    operationalCosts: number;
    totalExpenses: number;
  };
  netProfit: number;
  profitMargin: number;           // (netProfit / totalRevenue) * 100
  partnerCount: number;
  averageShareAmount: number;
}

// Monthly profit trend
export interface MonthlyProfit {
  month: string;
  revenue: number;
  expenses: number;
  equipmentCosts: number;
  netProfit: number;
  profitMargin: number;
}
```

### Partner Share Types

**File:** `types/src/models/PartnerShare.ts` - NEW FILE

```typescript
/**
 * Partner Share Types
 * 
 * Types for individual partner profit shares
 */

// Share status enumeration
export enum ShareStatus {
  PENDING = 'PENDING',           // Share calculated but not paid
  PAID = 'PAID'                  // Share has been paid to partner
}

// Partner share interface
export interface PartnerShare {
  id: string;
  distributionId: string;         // Reference to ProfitDistribution
  partnerId: string;              // Partner user ID
  shareAmount: number;            // Partner's share amount
  percentage: number;             // Ownership percentage used for calculation
  status: ShareStatus;
  paidAt: Date | null;
  paymentMethod?: string;         // How payment was made (optional)
  paymentReference?: string;      // Payment reference/transaction ID (optional)
  createdAt: Date;
  updatedAt: Date;
  
  // Populated relations
  distribution?: ProfitDistribution; // Distribution details
  partner?: UserPublic;           // Partner details
}

// Partner share summary
export interface PartnerShareSummary {
  partnerId: string;
  partnerName: string;
  totalShares: number;            // Total number of distributions received
  totalAmount: number;            // Total amount received
  pendingAmount: number;          // Amount pending payment
  paidAmount: number;             // Amount already paid
  averageMonthlyShare: number;    // Average monthly share
  lastPaymentDate: Date | null;
  shares: PartnerShare[];
}

// Partner share filters
export interface PartnerShareFilters {
  status?: ShareStatus;
  startDate?: Date;
  endDate?: Date;
  minAmount?: number;
  maxAmount?: number;
}
```

## Enhanced Analytics Types

### Financial Analytics Types

**File:** `types/src/models/Analytics.ts`

**Changes:**
```typescript
// ADD these interfaces to existing Analytics.ts:

// Enhanced profit analysis including equipment costs
export interface ProfitAnalysis {
  dateRange: {
    startDate: Date;
    endDate: Date;
  };
  revenue: {
    totalRevenue: number;
    billingRevenue: number;
    otherRevenue: number;
    monthlyAverage: number;
  };
  expenses: {
    equipmentCosts: number;
    equipmentDepreciation: number;
    equipmentMaintenance: number;
    operationalCosts: number;
    totalExpenses: number;
  };
  profit: {
    netProfit: number;
    profitMargin: number;        // (netProfit / totalRevenue) * 100
    monthlyAverage: number;
  };
  trends: {
    monthlyProfits: MonthlyProfit[];
    equipmentCosts: MonthlyEquipmentCost[];
  };
  equipmentROI: {
    averageROI: number;
    bestPerformingEquipment: EquipmentROI[];
    worstPerformingEquipment: EquipmentROI[];
  };
}

// Equipment cost breakdown for analytics
export interface EquipmentCostBreakdown {
  month: string;
  totalEquipment: number;
  costs: {
    depreciation: number;
    maintenance: number;
    newPurchases: number;
    total: number;
  };
  revenue: {
    equipmentGenerated: number;  // Revenue from equipment-assigned customers
    totalRevenue: number;
  };
  efficiency: {
    costPerCustomer: number;
    revenuePerEquipment: number;
    utilizationRate: number;     // Percentage of equipment assigned
  };
  equipmentDetails: Array<{
    equipmentId: string;
    name: string;
    cost: number;
    revenue: number;
    roi: number;
  }>;
}

// Partnership metrics for analytics
export interface PartnershipMetrics {
  companyId: string;
  overview: {
    totalPartners: number;
    activePartners: number;
    totalOwnership: number;
    averageOwnership: number;
  };
  financial: {
    totalDistributions: number;
    totalAmountDistributed: number;
    averageMonthlyDistribution: number;
    pendingPayments: number;
  };
  performance: {
    profitGrowth: number;        // Month-over-month profit growth
    partnerSatisfaction: number; // Based on payment timeliness
    distributionFrequency: number; // Distributions per year
  };
  trends: {
    monthlyDistributions: Array<{
      month: string;
      totalAmount: number;
      partnerCount: number;
      averageShare: number;
    }>;
    partnerGrowth: Array<{
      month: string;
      partnerCount: number;
      totalOwnership: number;
    }>;
  };
}
```

## API Response Types

### Equipment Cost API Types

**File:** `types/src/api/EquipmentCostAPI.ts` - NEW FILE

```typescript
/**
 * Equipment Cost API Response Types
 */

import { EquipmentFinancials, EquipmentROI, EquipmentCostAnalysis, MaintenanceRecord } from '../models/EquipmentCost';
import { ApiResponse, PaginatedResponse } from '../utils/ApiResponse';

// Equipment financials response
export type EquipmentFinancialsResponse = ApiResponse<EquipmentFinancials>;

// Equipment ROI response
export type EquipmentROIResponse = ApiResponse<EquipmentROI>;

// Equipment cost analysis response
export type EquipmentCostAnalysisResponse = ApiResponse<EquipmentCostAnalysis>;

// Maintenance records response
export type MaintenanceRecordsResponse = PaginatedResponse<MaintenanceRecord>;

// Update equipment costs response
export type UpdateEquipmentCostsResponse = ApiResponse<{
  success: boolean;
  equipmentId: string;
  updatedFields: string[];
}>;

// Add maintenance record response
export type AddMaintenanceRecordResponse = ApiResponse<MaintenanceRecord>;
```

### Partnership API Types

**File:** `types/src/api/PartnershipAPI.ts` - NEW FILE

```typescript
/**
 * Partnership API Response Types
 */

import { 
  Partnership, 
  ProfitDistribution, 
  PartnerShare, 
  PartnershipSummary,
  PartnerShareSummary,
  ProfitCalculationResult
} from '../models';
import { ApiResponse, PaginatedResponse } from '../utils/ApiResponse';

// Partnership management responses
export type PartnershipResponse = ApiResponse<Partnership>;
export type PartnershipsResponse = ApiResponse<Partnership[]>;
export type PartnershipSummaryResponse = ApiResponse<PartnershipSummary>;

// Profit distribution responses
export type ProfitDistributionResponse = ApiResponse<ProfitDistribution>;
export type ProfitDistributionsResponse = PaginatedResponse<ProfitDistribution>;
export type ProfitCalculationResponse = ApiResponse<ProfitCalculationResult>;

// Partner share responses
export type PartnerShareResponse = ApiResponse<PartnerShare>;
export type PartnerSharesResponse = PaginatedResponse<PartnerShare>;
export type PartnerShareSummaryResponse = ApiResponse<PartnerShareSummary>;

// Distribution actions responses
export type DistributeProfitResponse = ApiResponse<{
  distributionId: string;
  partnerShares: PartnerShare[];
  totalAmount: number;
  partnerCount: number;
}>;

export type CalculateMonthlyProfitResponse = ApiResponse<{
  distribution: ProfitDistribution;
  calculation: ProfitCalculationResult;
}>;
```

## Validation Schemas

### Equipment Cost Validation

**File:** `types/src/validation/EquipmentCostValidation.ts` - NEW FILE

```typescript
/**
 * Equipment Cost Validation Schemas
 * 
 * Zod schemas for validating equipment cost inputs
 */

import { z } from 'zod';

// Equipment cost update schema
export const equipmentCostSchema = z.object({
  purchaseCost: z.number().positive().optional(),
  monthlyDepreciation: z.number().positive().optional(),
  maintenanceCost: z.number().min(0).optional(),
});

// Maintenance record schema
export const maintenanceRecordSchema = z.object({
  equipmentId: z.string().uuid(),
  maintenanceDate: z.date(),
  cost: z.number().positive(),
  description: z.string().min(1).max(500),
});

// Equipment cost filters schema
export const equipmentCostFiltersSchema = z.object({
  showOnlyWithCosts: z.boolean().optional(),
  minROI: z.number().optional(),
  maxROI: z.number().optional(),
  hasMaintenanceRecords: z.boolean().optional(),
  dateRange: z.object({
    startDate: z.date(),
    endDate: z.date(),
  }).optional(),
});

// Cost analysis request schema
export const costAnalysisRequestSchema = z.object({
  startDate: z.date(),
  endDate: z.date(),
  includeMaintenanceCosts: z.boolean().default(true),
  includeDepreciation: z.boolean().default(true),
});

export type EquipmentCostInput = z.infer<typeof equipmentCostSchema>;
export type MaintenanceRecordInput = z.infer<typeof maintenanceRecordSchema>;
export type EquipmentCostFiltersInput = z.infer<typeof equipmentCostFiltersSchema>;
export type CostAnalysisRequestInput = z.infer<typeof costAnalysisRequestSchema>;
```

### Partnership Validation

**File:** `types/src/validation/PartnershipValidation.ts` - NEW FILE

```typescript
/**
 * Partnership Validation Schemas
 * 
 * Zod schemas for validating partnership inputs
 */

import { z } from 'zod';
import { PartnerRole, DistributionStatus, ShareStatus } from '../models';

// Partnership creation schema
export const createPartnershipSchema = z.object({
  companyId: z.string().uuid(),
  partnerEmail: z.string().email(),
  ownershipPercentage: z.number().min(0.01).max(100),
  role: z.nativeEnum(PartnerRole).default(PartnerRole.PARTNER),
  investmentAmount: z.number().positive().optional(),
});

// Partnership update schema
export const updatePartnershipSchema = z.object({
  ownershipPercentage: z.number().min(0.01).max(100).optional(),
  role: z.nativeEnum(PartnerRole).optional(),
  isActive: z.boolean().optional(),
  investmentAmount: z.number().positive().optional(),
});

// Profit calculation schema
export const calculateProfitSchema = z.object({
  companyId: z.string().uuid(),
  month: z.string().regex(/^\d{4}-\d{2}$/, 'Month must be in YYYY-MM format'),
});

// Profit distribution schema
export const distributeProfitSchema = z.object({
  distributionId: z.string().uuid(),
});

// Partner share filters schema
export const partnerShareFiltersSchema = z.object({
  status: z.nativeEnum(ShareStatus).optional(),
  startDate: z.date().optional(),
  endDate: z.date().optional(),
  minAmount: z.number().positive().optional(),
  maxAmount: z.number().positive().optional(),
});

// Ownership validation schema
export const ownershipValidationSchema = z.object({
  partnerships: z.array(z.object({
    ownershipPercentage: z.number().min(0).max(100),
    isActive: z.boolean(),
  })),
}).refine(
  (data) => {
    const totalOwnership = data.partnerships
      .filter(p => p.isActive)
      .reduce((sum, p) => sum + p.ownershipPercentage, 0);
    return totalOwnership <= 100;
  },
  {
    message: 'Total ownership percentage cannot exceed 100%',
  }
);

export type CreatePartnershipInput = z.infer<typeof createPartnershipSchema>;
export type UpdatePartnershipInput = z.infer<typeof updatePartnershipSchema>;
export type CalculateProfitInput = z.infer<typeof calculateProfitSchema>;
export type DistributeProfitInput = z.infer<typeof distributeProfitSchema>;
export type PartnerShareFiltersInput = z.infer<typeof partnerShareFiltersSchema>;
export type OwnershipValidationInput = z.infer<typeof ownershipValidationSchema>;
```

## Utility Types

### Financial Calculation Types

**File:** `types/src/utils/FinancialTypes.ts` - NEW FILE

```typescript
/**
 * Financial Calculation Utility Types
 */

// Date range utility type
export interface DateRange {
  startDate: Date;
  endDate: Date;
}

// Currency amount with metadata
export interface CurrencyAmount {
  amount: number;
  currency: string;
  formatted: string;
}

// Percentage with metadata
export interface Percentage {
  value: number;
  formatted: string;
  color?: 'success' | 'warning' | 'danger' | 'default';
}

// Financial calculation result
export interface CalculationResult<T = any> {
  success: boolean;
  result?: T;
  error?: string;
  warnings?: string[];
}

// ROI calculation parameters
export interface ROICalculationParams {
  initialInvestment: number;
  totalRevenue: number;
  totalCosts: number;
  timeperiodMonths: number;
}

// Profit margin calculation
export interface ProfitMarginCalculation {
  revenue: number;
  costs: number;
  grossProfit: number;
  grossMargin: number;
  netProfit: number;
  netMargin: number;
}

// Financial trend data point
export interface TrendDataPoint {
  period: string;           // Date or period identifier
  value: number;
  change?: number;          // Change from previous period
  changePercentage?: number; // Percentage change
}

// Financial comparison
export interface FinancialComparison {
  current: number;
  previous: number;
  change: number;
  changePercentage: number;
  trend: 'up' | 'down' | 'stable';
}
```

## Index File Updates

### Models Index

**File:** `types/src/models/index.ts`

**Changes:**
```typescript
// ADD new model exports:
export * from './EquipmentCost';      // ⭐ NEW
export * from './Partnership';        // ⭐ NEW
export * from './ProfitDistribution'; // ⭐ NEW
export * from './PartnerShare';       // ⭐ NEW

// ... existing exports (unchanged)
```

### API Index

**File:** `types/src/api/index.ts`

**Changes:**
```typescript
// ADD new API type exports:
export * from './EquipmentCostAPI';   // ⭐ NEW
export * from './PartnershipAPI';     // ⭐ NEW

// ... existing exports (unchanged)
```

### Validation Index

**File:** `types/src/validation/index.ts`

**Changes:**
```typescript
// ADD new validation exports:
export * from './EquipmentCostValidation'; // ⭐ NEW
export * from './PartnershipValidation';   // ⭐ NEW

// ... existing exports (unchanged)
```

### Utils Index

**File:** `types/src/utils/index.ts`

**Changes:**
```typescript
// ADD new utility type exports:
export * from './FinancialTypes';    // ⭐ NEW

// ... existing exports (unchanged)
```

### Root Index

**File:** `types/src/index.ts`

**Changes:**
```typescript
// Existing exports (unchanged)
export * from './models';
export * from './enums';
export * from './api';
export * from './utils';

// ADD new validation exports:
export * from './validation';         // ⭐ NEW
```

## Enum Updates

### Equipment Status Enum

**File:** `types/src/enums/EquipmentStatus.ts`

**No changes needed** - existing enum supports new cost tracking features

### New Financial Enums

**File:** `types/src/enums/FinancialEnums.ts` - NEW FILE

```typescript
/**
 * Financial-related enumerations
 */

// Partner roles
export enum PartnerRole {
  OWNER = 'OWNER',
  PARTNER = 'PARTNER',
  INVESTOR = 'INVESTOR'
}

// Distribution status
export enum DistributionStatus {
  CALCULATED = 'CALCULATED',
  DISTRIBUTED = 'DISTRIBUTED',
  PAID = 'PAID'
}

// Share status
export enum ShareStatus {
  PENDING = 'PENDING',
  PAID = 'PAID'
}

// ROI performance categories
export enum ROIPerformance {
  EXCELLENT = 'EXCELLENT',    // > 20%
  GOOD = 'GOOD',             // 10-20%
  AVERAGE = 'AVERAGE',       // 5-10%
  POOR = 'POOR',             // 0-5%
  NEGATIVE = 'NEGATIVE'      // < 0%
}

// Financial calculation types
export enum CalculationType {
  ROI = 'ROI',
  PROFIT_MARGIN = 'PROFIT_MARGIN',
  DEPRECIATION = 'DEPRECIATION',
  COST_ANALYSIS = 'COST_ANALYSIS'
}
```

### Enums Index Update

**File:** `types/src/enums/index.ts`

**Changes:**
```typescript
// ADD new enum exports:
export * from './FinancialEnums';     // ⭐ NEW

// ... existing exports (unchanged)
```

## Type Safety Improvements

### Strict Type Definitions

All new types include:
- **Strict null checking** - Explicit `null` types where appropriate
- **Enum constraints** - Using TypeScript enums for status fields
- **UUID validation** - String types with UUID format validation
- **Date handling** - Proper Date types for temporal data
- **Number precision** - Specific number types for financial calculations
- **Optional chaining** - Safe property access with optional operators

### Runtime Validation

All input types have corresponding Zod schemas for:
- **API request validation** - Server-side input validation
- **Form validation** - Client-side form validation
- **Type coercion** - Automatic type conversion where safe
- **Error messages** - Descriptive validation error messages

### Type Guards

**File:** `types/src/utils/TypeGuards.ts` - NEW FILE

```typescript
/**
 * Type guard functions for runtime type checking
 */

import { PartnerRole, DistributionStatus, ShareStatus, ROIPerformance } from '../enums';
import { Partnership, ProfitDistribution, PartnerShare, EquipmentROI } from '../models';

// Partnership type guards
export function isValidPartnerRole(role: any): role is PartnerRole {
  return Object.values(PartnerRole).includes(role);
}

export function isActivePartnership(partnership: Partnership): boolean {
  return partnership.isActive && partnership.ownershipPercentage > 0;
}

// Distribution type guards
export function isDistributionStatus(status: any): status is DistributionStatus {
  return Object.values(DistributionStatus).includes(status);
}

export function canDistributeProfit(distribution: ProfitDistribution): boolean {
  return distribution.status === DistributionStatus.CALCULATED && distribution.netProfit > 0;
}

// Share type guards
export function isShareStatus(status: any): status is ShareStatus {
  return Object.values(ShareStatus).includes(status);
}

export function isPendingShare(share: PartnerShare): boolean {
  return share.status === ShareStatus.PENDING && share.paidAt === null;
}

// ROI type guards
export function getROIPerformance(roi: number): ROIPerformance {
  if (roi > 20) return ROIPerformance.EXCELLENT;
  if (roi > 10) return ROIPerformance.GOOD;
  if (roi > 5) return ROIPerformance.AVERAGE;
  if (roi > 0) return ROIPerformance.POOR;
  return ROIPerformance.NEGATIVE;
}

export function isPositiveROI(equipment: EquipmentROI): boolean {
  return equipment.roiPercentage > 0 && equipment.netProfit > 0;
}

// Financial validation
export function isValidOwnershipPercentage(percentage: number): boolean {
  return percentage > 0 && percentage <= 100;
}

export function isValidMonthFormat(month: string): boolean {
  return /^\d{4}-\d{2}$/.test(month);
}
```

This types architecture provides comprehensive type safety and validation for both Equipment Cost Analysis and Partnership Profit Sharing features while maintaining consistency with the existing type system.